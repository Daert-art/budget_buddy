{% extends "base.html" %}
{% block title %}Operations{% endblock title %}

{% block content %}
    <main class="main-wrapper">
        {#        <div class="container">#}
        {#            <p>#}
        {#                <a href="{% url 'core:tag_list' %}">üîñ –°–ø–∏—Å–æ–∫ —Ç–µ–≥—ñ–≤</a> |#}
        {#                <a href="{% url 'core:tag_add' %}">‚ûï –î–æ–¥–∞—Ç–∏ —Ç–µ–≥</a>#}
        {#            </p>#}
        {#        </div>#}

        <div class="container">
            <form action="{% url 'core:operations' %}" method="post" class="form-flex">
                {% csrf_token %}
                <input type="number" name="amount" placeholder="–°—É–º–∞" required>
                <input type="date" name="date" required>
                <input type="text" name="description" placeholder="–û–ø–∏—Å" required>
                <select name="type" id="type" required>
                    {% for type in type_choices %}
                        <option value="{{ type.value }}"
                                {% if type.value == 'EXPENSE' %}selected{% endif %}
                        >
                            {{ type.label }}
                        </option>
                    {% endfor %}
                </select>

                <select name="tag">
                    <option value="">‚Äî –ë–µ–∑ —Ç–µ–≥–∞ ‚Äî</option>
                    {% for tag in tags_list %}
                        <option value="{{ tag.id }}">{{ tag.name }}</option>
                    {% endfor %}
                </select>

                <button type="submit">üíæ –ó–±–µ—Ä–µ–≥—Ç–∏</button>
            </form>
        </div>

        <div class="container">
            <table class="form-container">
                <tr>
                    <th>–°—É–º–∞</th>
                    <th>–î–∞—Ç–∞</th>
                    <th>–û–ø–∏—Å</th>
                    <th>–¢–∏–ø</th>
                    <th>Tag</th>
                    <th></th>
                </tr>
                {% for operation in operations_list %}
                    <tr>
                        <td>{{ operation.amount }}</td>
                        <td>{{ operation.date }}</td>
                        <td>{{ operation.description }}</td>
                        <td>{{ operation.get_type_display }}</td>
                        <td>{{ operation.tag.name|default:"- –ë–µ–∑ —Ç–µ–≥–∞ -" }}</td>
                        <td><a href="{% url 'core:operation_detail' operation.id %}">‚ãÆ‚ãÆ‚ãÆ</a></td>
                    </tr>
                {% endfor %}
            </table>
        </div>

    </main>
{% endblock content %}
